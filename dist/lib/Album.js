"use strict";var __importDefault=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0});const Error_1=require("../Error"),Spotify_1=__importDefault(require("../Spotify"));class Album extends Spotify_1.default{async search(r,e){return new Promise((async(t,i)=>{if(!r)throw new Error_1.MissingParamError("missing query!");e||(e={});try{let i=(await this.fetch({link:"v1/search",params:{q:encodeURIComponent(r),market:"US",limit:e.limit||20,type:"album"}})).albums.items;if(e.advanced)for(let r=0;r<i.length;r++){let e=await this.getCodeImage(i[r].uri);i[r].codeImage=e.image,i[r].dominantColor=e.dominantColor}t(i)}catch(r){i(new Error_1.UnexpectedError(r))}}))}async get(r){return new Promise((async(e,t)=>{r||t(new Error_1.MissingParamError("missing id"));try{e(await this.fetch({link:"v1/albums/"+r}))}catch(r){t(new Error_1.UnexpectedError(r))}}))}async getTracks(r,e){return new Promise((async(t,i)=>{r||i(new Error_1.MissingParamError("missing id!")),e||(e={});try{let i=(await this.fetch({link:`v1/albums/${r}/tracks`,params:{limit:e.limit||20,market:"US",offset:"0"}})).items;if(e.advanced)for(let r=0;r<i.length;r++){let e=await this.getCodeImage(i[r].uri);i[r].codeImage=e.image,i[r].dominantColor=e.dominantColor}t(i)}catch(r){i(new Error_1.UnexpectedError(r))}}))}}exports.default=Album;
